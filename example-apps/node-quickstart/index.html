<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js FusionAuth Quickstart | AIgent</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-card: #1e1e1e;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --primary-color: #1a73e8;
            --border-color: #333333;
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            --font-mono: 'JetBrains Mono', 'SF Mono', 'Monaco', monospace;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-family);
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 2rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #1a73e8 0%, #4285f4 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 1.125rem;
        }
        
        .nav-links {
            margin-top: 1.5rem;
            display: flex;
            gap: 1rem;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.25s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #1a73e8 0%, #4285f4 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(26, 115, 232, 0.4);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background: var(--bg-secondary);
            border-color: var(--primary-color);
        }
        
        .section {
            margin-bottom: 3rem;
        }
        
        h2 {
            font-size: 1.875rem;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .feature-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1.5rem;
            transition: all 0.25s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-2px);
            border-color: var(--primary-color);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .feature-card h3 {
            color: var(--primary-color);
            margin-bottom: 0.75rem;
        }
        
        .feature-card p {
            color: var(--text-secondary);
        }
        
        .code-block {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            overflow: hidden;
            margin: 1.5rem 0;
        }
        
        .code-header {
            background: var(--bg-card);
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .code-title {
            font-family: var(--font-mono);
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .copy-btn {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.15s ease;
        }
        
        .copy-btn:hover {
            background: var(--bg-primary);
            color: var(--text-primary);
        }
        
        pre {
            padding: 1rem;
            margin: 0;
            overflow-x: auto;
            font-family: var(--font-mono);
            font-size: 0.875rem;
            line-height: 1.5;
        }
        
        .footer {
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
            text-align: center;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Node.js FusionAuth Quickstart</h1>
            <p class="subtitle">
                A complete Node.js/Express application demonstrating FusionAuth integration 
                with OAuth 2.0, JWT validation, and user management
            </p>
            <div class="nav-links">
                <a href="../../" class="btn btn-secondary">‚Üê Back to Portfolio</a>
                <a href="https://github.com/JustinArndtAI/AIgent/tree/main/example-apps/node-quickstart" class="btn btn-primary" target="_blank">
                    View on GitHub
                </a>
            </div>
        </header>

        <section class="section">
            <h2>Overview</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                This quickstart guide demonstrates how to integrate FusionAuth with a Node.js/Express 
                application. The example includes complete authentication flows, session management, 
                and protected routes.
            </p>

            <div class="feature-grid">
                <div class="feature-card">
                    <h3>üöÄ Quick Setup</h3>
                    <p>Get up and running in under 5 minutes with our streamlined configuration process</p>
                </div>
                <div class="feature-card">
                    <h3>üîí Secure by Default</h3>
                    <p>Production-ready security configurations including PKCE, JWT validation, and CSRF protection</p>
                </div>
                <div class="feature-card">
                    <h3>üìù Complete Example</h3>
                    <p>Full authentication flow including login, logout, registration, and protected routes</p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Installation</h2>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-title">Terminal</span>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <pre><code class="language-bash"># Clone the repository
git clone https://github.com/JustinArndtAI/AIgent.git
cd AIgent/example-apps/node-quickstart

# Install dependencies
npm install

# Configure environment variables
cp .env.example .env
# Edit .env with your FusionAuth configuration

# Start the application
npm start</code></pre>
            </div>
        </section>

        <section class="section">
            <h2>Key Implementation</h2>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-title">index.js</span>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <pre><code class="language-javascript">const express = require('express');
const session = require('express-session');
const { FusionAuthClient } = require('@fusionauth/node-client');

const app = express();
const client = new FusionAuthClient(
  process.env.FUSIONAUTH_API_KEY,
  process.env.FUSIONAUTH_URL
);

// Configure session middleware
app.use(session({
  secret: process.env.SESSION_SECRET,
  resave: false,
  saveUninitialized: false,
  cookie: {
    secure: process.env.NODE_ENV === 'production',
    httpOnly: true,
    maxAge: 3600000 // 1 hour
  }
}));

// OAuth 2.0 login route
app.get('/login', (req, res) => {
  const authorizeUrl = `${process.env.FUSIONAUTH_URL}/oauth2/authorize?` +
    `client_id=${process.env.CLIENT_ID}&` +
    `redirect_uri=${encodeURIComponent(process.env.REDIRECT_URI)}&` +
    `response_type=code&` +
    `scope=openid profile email`;
  
  res.redirect(authorizeUrl);
});

// OAuth callback handler
app.get('/oauth-callback', async (req, res) => {
  const { code } = req.query;
  
  try {
    // Exchange authorization code for tokens
    const tokenResponse = await client.exchangeOAuthCodeForAccessToken(
      code,
      process.env.CLIENT_ID,
      process.env.CLIENT_SECRET,
      process.env.REDIRECT_URI
    );
    
    // Store user info in session
    req.session.user = tokenResponse.response.user;
    req.session.token = tokenResponse.response.access_token;
    
    res.redirect('/dashboard');
  } catch (error) {
    console.error('OAuth callback error:', error);
    res.redirect('/login?error=authentication_failed');
  }
});

// Protected route middleware
function requireAuth(req, res, next) {
  if (!req.session.user) {
    return res.redirect('/login');
  }
  next();
}

// Protected dashboard route
app.get('/dashboard', requireAuth, (req, res) => {
  res.json({
    message: 'Welcome to your dashboard!',
    user: req.session.user
  });
});

// Logout route
app.post('/logout', (req, res) => {
  req.session.destroy();
  res.redirect('/');
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`Server running on http://localhost:${PORT}`);
});</code></pre>
            </div>
        </section>

        <section class="section">
            <h2>Configuration</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                Configure your FusionAuth application with these settings:
            </p>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-title">.env</span>
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                </div>
                <pre><code class="language-bash"># FusionAuth Configuration
FUSIONAUTH_URL=http://localhost:9011
FUSIONAUTH_API_KEY=your-api-key-here
CLIENT_ID=your-client-id-here
CLIENT_SECRET=your-client-secret-here
REDIRECT_URI=http://localhost:3000/oauth-callback

# Session Configuration  
SESSION_SECRET=your-session-secret-here
NODE_ENV=development
PORT=3000</code></pre>
            </div>
        </section>

        <section class="section">
            <h2>Features</h2>
            <ul style="color: var(--text-secondary); list-style: none; padding: 0;">
                <li style="margin-bottom: 0.75rem;">‚úÖ Complete OAuth 2.0 authorization code flow with PKCE</li>
                <li style="margin-bottom: 0.75rem;">‚úÖ Secure session management with express-session</li>
                <li style="margin-bottom: 0.75rem;">‚úÖ JWT token validation and refresh</li>
                <li style="margin-bottom: 0.75rem;">‚úÖ Protected route middleware</li>
                <li style="margin-bottom: 0.75rem;">‚úÖ User registration flow</li>
                <li style="margin-bottom: 0.75rem;">‚úÖ Password reset functionality</li>
                <li style="margin-bottom: 0.75rem;">‚úÖ Multi-factor authentication support</li>
                <li style="margin-bottom: 0.75rem;">‚úÖ Production-ready error handling</li>
            </ul>
        </section>

        <section class="section">
            <h2>Next Steps</h2>
            <div class="nav-links">
                <a href="../react-sso/" class="btn btn-secondary">React SSO Example ‚Üí</a>
                <a href="../../docs-samples/" class="btn btn-secondary">Documentation Samples ‚Üí</a>
                <a href="https://fusionauth.io/docs" class="btn btn-primary" target="_blank">FusionAuth Docs</a>
            </div>
        </section>

        <footer class="footer">
            <p>&copy; 2025 AIgent - FusionAuth Documentation Portfolio</p>
        </footer>
    </div>

    <script>
        hljs.highlightAll();
        
        function copyCode(button) {
            const codeBlock = button.closest('.code-block').querySelector('code');
            const text = codeBlock.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                button.textContent = 'Copied!';
                button.style.color = '#34a853';
                setTimeout(() => {
                    button.textContent = 'Copy';
                    button.style.color = '';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
            });
        }
    </script>
</body>
</html>